§=
=O:\CaseStudy\Case_Study\Controllers\AppointmentsController.cs
	namespace 	

Case_Study
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class "
AppointmentsController '
:( )
ControllerBase* 8
{ 
private 
readonly 
IAppointmentService ,
_appointmentService- @
;@ A
public "
AppointmentsController %
(% &
IAppointmentService& 9
appointmentService: L
)L M
{ 	
_appointmentService 
=  !
appointmentService" 4
;4 5
} 	
[ 	
HttpGet	 
( 
$str 
) 
]  
public 
async 
Task 
< 
ActionResult &
<& '
List' +
<+ ,
Appointment, 7
>7 8
>8 9
>9 :%
GetAppointmentByPatientID; T
(T U
intU X
	patientidY b
)b c
{ 	
var 
appointment 
= 
await #
_appointmentService$ 7
.7 8%
GetAppointmentByPatientID8 Q
(Q R
	patientidR [
)[ \
;\ ]
if 
( 
appointment 
== 
null #
)# $
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return$$ 
appointment$$ 
;$$ 
}%% 	
[&& 	
HttpPost&&	 
]&& 
public'' 
async'' 
Task'' 
<'' 
ActionResult'' &
<''& '
Appointment''' 2
>''2 3
>''3 4
PostAppointment''5 D
(''D E
Appointment''E P
appointment''Q \
)''\ ]
{(( 	
appointment)) 
.)) 
Status)) 
=))  
$str))! *
;))* +
if** 
(** 
appointment** 
.** 
DoctorID** $
==**% '
$num**( )
||*** ,
appointment**- 8
.**8 9
	PatientID**9 B
==**C E
$num**F G
||**H J
appointment**K V
.**V W
HealthIssue**W b
==**c e
null**f j
||**k m
appointment**n y
.**y z
Date**z ~
==	** Å
null
**Ç Ü
)
**Ü á
{++ 
return,, 

BadRequest,, !
(,,! "
),," #
;,,# $
}-- 
var22 
appointment122 
=22 
await22 $
_appointmentService22% 8
.228 9$
PostAppointmentInService229 Q
(22Q R
appointment22R ]
)22] ^
;22^ _
return44 
appointment144 
;44  
}55 	
[77 	
HttpGet77	 
(77 
$str77 %
)77% &
]77& '
public88 
async88 
Task88 
<88 
ActionResult88 &
<88& '
List88' +
<88+ ,
Appointment88, 7
>887 8
>888 9
>889 :$
GetAppointmentByDoctorID88; S
(88S T
int88T W
	doctor_id88X a
)88a b
{99 	
var:: 
appointmentList:: 
=::  !
await::" '
_appointmentService::( ;
.::; <$
GetAppointmentByDoctorID::< T
(::T U
	doctor_id::U ^
)::^ _
;::_ `
if<< 
(<< 
appointmentList<< 
==<<  "
null<<# '
)<<' (
{== 
return>> 
NotFound>> 
(>>  
)>>  !
;>>! "
}?? 
return@@ 
appointmentList@@ "
;@@" #
}AA 	
[CC 	
HttpGetCC	 
(CC 
$strCC #
)CC# $
]CC$ %
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
<DD& '
AppointmentDD' 2
>DD2 3
>DD3 4
GetAppointmentDD5 C
(DDC D
intDDD G
idDDH J
)DDJ K
{EE 	
varGG 
appointmentGG 
=GG 
awaitGG #
_appointmentServiceGG$ 7
.GG7 8
GetAppointmentByIDGG8 J
(GGJ K
idGGK M
)GGM N
;GGN O
ifII 
(II 
appointmentII 
==II 
nullII #
)II# $
{JJ 
returnKK 
NotFoundKK 
(KK  
)KK  !
;KK! "
}LL 
returnMM 
appointmentMM 
;MM 
}NN 	
[OO 	
HttpPutOO	 
(OO 
$strOO 
)OO 
]OO 
publicPP 
HttpResponseMessagePP "
PutAppointmentPP# 1
(PP1 2
intPP2 5
idPP6 8
,PP8 9
AppointmentPP: E
appointmentPPF Q
)PPQ R
{QQ 	
varRR 
	response1RR 
=RR 
newRR 
HttpResponseMessageRR  3
(RR3 4
HttpStatusCodeRR4 B
.RRB C

BadRequestRRC M
)RRM N
;RRN O
varSS 
responseSS 
=SS 
newSS 
HttpResponseMessageSS 2
(SS2 3
)SS3 4
;SS4 5
ifTT 
(TT 
idTT 
!=TT 
appointmentTT !
.TT! "
AppointmentIDTT" /
)TT/ 0
{UU 
returnVV 
	response1VV  
;VV  !
}WW 
tryXX 
{YY 
varZZ 
appointment_updateZZ &
=ZZ' (
_appointmentServiceZZ) <
.ZZ< =
PutAppointmentZZ= K
(ZZK L
idZZL N
,ZZN O
appointmentZZP [
)ZZ[ \
;ZZ\ ]
}[[ 
catch\\ 
(\\ (
DbUpdateConcurrencyException\\ /
)\\/ 0
{]] 
throw^^ 
;^^ 
}__ 
return`` 
response`` 
;`` 
}aa 	
[bb 	
HttpPutbb	 
(bb 
$strbb  
)bb  !
]bb! "
publiccc 
HttpResponseMessagecc "$
PostAppointmentForReviewcc# ;
(cc; <
intcc< ?
idcc@ B
,ccB C
stringccD J
reviewccK Q
)ccQ R
{dd 	
varff 
appointment_updateff "
=ff# $
_appointmentServiceff% 8
.ff8 9$
PostAppointmentForReviewff9 Q
(ffQ R
idffR T
,ffT U
reviewffV \
)ff\ ]
;ff] ^
returnhh 
appointment_updatehh %
;hh% &
}ii 	
[jj 	

HttpDeletejj	 
(jj 
$strjj 
)jj 
]jj 
publickk 
HttpResponseMessagekk "
DeleteAppointmentkk# 4
(kk4 5
intkk5 8
idkk9 ;
)kk; <
{ll 	
varmm 
responsemm 
=mm 
newmm 
HttpResponseMessagemm 2
(mm2 3
)mm3 4
;mm4 5
varoo 
appointmentoo 
=oo 
_appointmentServiceoo 1
.oo1 2
DeleteAppointmentoo2 C
(ooC D
idooD F
)ooF G
;ooG H
returnuu 
responseuu 
;uu 
}vv 	
}
çç 
}éé Ê
8O:\CaseStudy\Case_Study\Controllers\DoctorsController.cs
	namespace 	

Case_Study
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
DoctorsController "
:# $
ControllerBase% 3
{ 
private 
readonly 
IDoctorService '
_doctorservice( 6
;6 7
public 
DoctorsController  
(  !
IDoctorService! /
doctorservice0 =
)= >
{ 	
_doctorservice 
= 
doctorservice *
;* +
} 	
[ 	
HttpGet	 
( 
$str *
)* +
]+ ,
public 
async 
Task 
< 
ActionResult &
<& '
List' +
<+ ,
Doctor, 2
>2 3
>3 4
>4 5
	GetDoctor6 ?
(? @
string@ F
specializationG U
)U V
{ 	
var 
doctor 
= 
await 
_doctorservice -
.- .%
GetDoctorBySpecialization. G
(G H
specializationH V
)V W
;W X
if 
( 
doctor 
== 
null 
) 
{ 
return   
NotFound   
(    
)    !
;  ! "
}!! 
return## 
doctor## 
;## 
}$$ 	
[%% 	
HttpPost%%	 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Doctor&&' -
>&&- .
>&&. /

PostDoctor&&0 :
(&&: ;
Doctor&&; A
doctor&&B H
)&&H I
{'' 	
if(( 
((( 
doctor(( 
.(( 
Name(( 
==(( 
null(( #
||(($ &
doctor((' -
.((- .
Contact((. 5
==((6 8
$num((9 :
||((; =
doctor((> D
.((D E
Email((E J
==((K M
null((N R
||((S U
doctor((V \
.((\ ]
Password((] e
==((f h
null((i m
||((n p
doctor((q w
.((w x
Specialization	((x Ü
==
((á â
null
((ä é
)
((é è
{)) 
return** 

BadRequest** !
(**! "
)**" #
;**# $
}++ 
var,, 
doctor1,, 
=,, 
await,, 
_doctorservice,,  .
.,,. /
PostDoctorByService,,/ B
(,,B C
doctor,,C I
),,I J
;,,J K
return-- 
doctor1-- 
;-- 
}.. 	
[00 	
HttpGet00	 
(00 
$str00 
)00 
]00 
public11 
async11 
Task11 
<11 
ActionResult11 &
<11& '
Doctor11' -
>11- .
>11. /
GetDoctorByEmail110 @
(11@ A
string11A G
email11H M
)11M N
{22 	
var33 
doctor33 
=33 
await33 
_doctorservice33 -
.33- .
GetDoctorByEmail33. >
(33> ?
email33? D
)33D E
;33E F
if55 
(55 
doctor55 
==55 
null55 
)55 
{66 
return77 
NotFound77 
(77  
)77  !
;77! "
}88 
return:: 
doctor:: 
;:: 
};; 	
}
™™ 
}´´ Ÿ
9O:\CaseStudy\Case_Study\Controllers\PatientsController.cs
	namespace 	

Case_Study
 
. 
Controllers  
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
PatientsController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
IPatientService (
_patientService) 8
;8 9
public 
PatientsController !
(! "
IPatientService" 1
patientService2 @
)@ A
{ 	
_patientService 
= 
patientService ,
;, -
} 	
[ 	
HttpPost	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
Patient' .
>. /
>/ 0
PostPatient1 <
(< =
Patient= D
patientE L
)L M
{ 	
if 
( 
patient 
. 
Name 
== 
null  $
||% '
patient( /
./ 0
Contact0 7
==8 :
$num; <
||= ?
patient@ G
.G H
EmailH M
==N P
nullQ U
||V X
patientY `
.` a
Passworda i
==j l
nullm q
)q r
{ 
return 

BadRequest !
(! "
)" #
;# $
} 
var   
patient1   
=   
await    
_patientService  ! 0
.  0 1 
PostPatientByService  1 E
(  E F
patient  F M
)  M N
;  N O
return!! 
patient1!! 
;!! 
}"" 	
[%% 	
HttpGet%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
async&& 
Task&& 
<&& 
ActionResult&& &
<&&& '
Patient&&' .
>&&. /
>&&/ 0

GetPatient&&1 ;
(&&; <
string&&< B
email&&C H
)&&H I
{'' 	
var(( 
patient(( 
=(( 
await(( 
_patientService((  /
.((/ 0
GetPatientByEmail((0 A
(((A B
email((B G
)((G H
;((H I
if** 
(** 
patient** 
==** 
null** 
)**  
{++ 
return,, 
NotFound,, 
(,,  
),,  !
;,,! "
}-- 
return// 
patient// 
;// 
}00 	
}
öö 
}õõ ±
2O:\CaseStudy\Case_Study\Data\AppointmentContext.cs
	namespace 	

Case_Study
 
. 
Data 
{		 
public

 

class

 
AppointmentContext

 #
:

$ %
	DbContext

& /
{ 
public 
AppointmentContext !
(! "
DbContextOptions" 2
<2 3
AppointmentContext3 E
>E F
optionsG N
)N O
:P Q
baseR V
(V W
optionsW ^
)^ _
{ 	
} 	
public 
DbSet 
< 
Appointment  
>  !
Appointment" -
{. /
get0 3
;3 4
set5 8
;8 9
}: ;
} 
} ì
-O:\CaseStudy\Case_Study\Data\DoctorContext.cs
	namespace 	

Case_Study
 
. 
Data 
{		 
public

 

class

 
DoctorContext

 
:

 
	DbContext

  )
{ 
public 
DoctorContext 
( 
DbContextOptions -
<- .
DoctorContext. ;
>; <
options= D
)D E
:F G
baseH L
(L M
optionsM T
)T U
{ 	
} 	
public 
DbSet 
< 
Doctor 
> 
Doctor #
{$ %
get& )
;) *
set+ .
;. /
}0 1
} 
} õ
.O:\CaseStudy\Case_Study\Data\PatientContext.cs
	namespace 	

Case_Study
 
. 
Data 
{		 
public

 

class

 
PatientContext

 
:

  !
	DbContext

" +
{ 
public 
PatientContext 
( 
DbContextOptions .
<. /
PatientContext/ =
>= >
options? F
)F G
:H I
baseJ N
(N O
optionsO V
)V W
{ 
} 
public 
DbSet 
< 
Patient  
>  !
Patient" )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 	
} “
<O:\CaseStudy\Case_Study\Migrations\20210604100625_initial.cs
	namespace 	

Case_Study
 
. 

Migrations 
{ 
public 

partial 
class 
initial  
:! "
	Migration# ,
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
CreateTable		 (
(		( )
name

 
:

 
$str

 
,

  
columns 
: 
table 
=> !
new" %
{ 
	PatientID 
= 
table  %
.% &
Column& ,
<, -
int- 0
>0 1
(1 2
type2 6
:6 7
$str8 =
,= >
nullable? G
:G H
falseI N
)N O
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
trueQ U
)U V
,V W
Contact 
= 
table #
.# $
Column$ *
<* +
long+ /
>/ 0
(0 1
type1 5
:5 6
$str7 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
trueR V
)V W
,W X
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
trueU Y
)Y Z
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 1
,1 2
x3 4
=>5 7
x8 9
.9 :
	PatientID: C
)C D
;D E
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
)  
;  !
} 	
} 
}   ´ 
FO:\CaseStudy\Case_Study\Migrations\Appointment\20210604100717_third.cs
	namespace 	

Case_Study
 
. 

Migrations 
.  
Appointment  +
{ 
public 

partial 
class 
third 
:  
	Migration! *
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
AppointmentId !
=" #
table$ )
.) *
Column* 0
<0 1
int1 4
>4 5
(5 6
type6 :
:: ;
$str< A
,A B
nullableC K
:K L
falseM R
)R S
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
	PatientId 
= 
table  %
.% &
Column& ,
<, -
int- 0
>0 1
(1 2
type2 6
:6 7
$str8 =
,= >
nullable? G
:G H
falseI N
)N O
,O P
DoctorId 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
,N O
Date 
= 
table  
.  !
Column! '
<' (
DateTime( 0
>0 1
(1 2
type2 6
:6 7
$str8 C
,C D
nullableE M
:M N
falseO T
)T U
,U V
HealthIssue 
=  !
table" '
.' (
Column( .
<. /
string/ 5
>5 6
(6 7
type7 ;
:; <
$str= L
,L M
nullableN V
:V W
trueX \
)\ ]
,] ^
Prescription  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
type8 <
:< =
$str> M
,M N
nullableO W
:W X
trueY ]
)] ^
,^ _
Review 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
trueS W
)W X
,X Y
Status 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 G
,G H
nullableI Q
:Q R
trueS W
)W X
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
AppointmentId> K
)K L
;L M
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder   
.   
	DropTable   &
(  & '
name!! 
:!! 
$str!! #
)!!# $
;!!$ %
}"" 	
}## 
}$$ ±
BO:\CaseStudy\Case_Study\Migrations\Doctor\20210604100658_second.cs
	namespace 	

Case_Study
 
. 

Migrations 
.  
Doctor  &
{ 
public 

partial 
class 
second 
:  !
	Migration" +
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
CreateTable		 (
(		( )
name

 
:

 
$str

 
,

 
columns 
: 
table 
=> !
new" %
{ 
DoctorID 
= 
table $
.$ %
Column% +
<+ ,
int, /
>/ 0
(0 1
type1 5
:5 6
$str7 <
,< =
nullable> F
:F G
falseH M
)M N
. 

Annotation #
(# $
$str$ 8
,8 9
$str: @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 E
,E F
nullableG O
:O P
trueQ U
)U V
,V W
Contact 
= 
table #
.# $
Column$ *
<* +
long+ /
>/ 0
(0 1
type1 5
:5 6
$str7 ?
,? @
nullableA I
:I J
falseK P
)P Q
,Q R
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
type1 5
:5 6
$str7 F
,F G
nullableH P
:P Q
trueR V
)V W
,W X
Specialization "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ O
,O P
nullableQ Y
:Y Z
true[ _
)_ `
,` a
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
type4 8
:8 9
$str: I
,I J
nullableK S
:S T
trueU Y
)Y Z
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 0
,0 1
x2 3
=>4 6
x7 8
.8 9
DoctorID9 A
)A B
;B C
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
) 
;  
} 	
}   
}!! £
-O:\CaseStudy\Case_Study\Models\Appointment.cs
	namespace 	

Case_Study
 
. 
Models 
{		 
public

 

class

 
Appointment

 
{ 
[ 	
Key	 
, &
DatabaseGeneratedAttribute (
(( )#
DatabaseGeneratedOption) @
.@ A
IdentityA I
)I J
]J K
public 
int 
AppointmentID  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
int 
	PatientID 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
DoctorID 
{ 
get !
;! "
set# &
;& '
}( )
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
HealthIssue !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
string 
Prescription "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Review 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ‹

(O:\CaseStudy\Case_Study\Models\Doctor.cs
	namespace 	

Case_Study
 
. 
Models 
{		 
public

 

class

 
Doctor

 
{ 
[ 	
Key	 
, &
DatabaseGeneratedAttribute (
(( )#
DatabaseGeneratedOption) @
.@ A
IdentityA I
)I J
]J K
public 
int 
DoctorID 
{ 
get !
;! "
set# &
;& '
}( )
public 
String 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
long 
Contact 
{ 
get !
;! "
set# &
;& '
}( )
public 
String 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
String 
Specialization $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
String 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} †
'O:\CaseStudy\Case_Study\Models\Login.cs
	namespace 	

Case_Study
 
. 
Models 
{ 
public 

class 
Login 
{		 
public

 
string

 
Email

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ω	
)O:\CaseStudy\Case_Study\Models\Patient.cs
	namespace 	

Case_Study
 
. 
Models 
{		 
public

 

class

 
Patient

 
{ 
[ 	
Key	 
, &
DatabaseGeneratedAttribute (
(( )#
DatabaseGeneratedOption) @
.@ A
IdentityA I
)I J
]J K
public 
int 
	PatientID 
{ 
get "
;" #
set$ '
;' (
}) *
public 
String 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
long 
Contact 
{ 
get !
;! "
set# &
;& '
}( )
public 
String 
Email 
{ 
get !
;! "
set# &
;& '
}( )
public 
String 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ˙	
"O:\CaseStudy\Case_Study\Program.cs
	namespace

 	

Case_Study


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ñ=
6O:\CaseStudy\Case_Study\Services\AppointmentService.cs
	namespace 	

Case_Study
 
. 
Services 
{ 
public 

class 
AppointmentService #
:# $
IAppointmentService$ 7
{ 
private 
readonly 
AppointmentContext +
_context, 4
;4 5
public 
AppointmentService !
(! "
AppointmentContext" 4
appointmentContext5 G
)G H
{ 	
_context 
= 
appointmentContext )
;) *
} 	
public 
async 
Task 
< 
ActionResult &
<& '
List' +
<+ ,
Appointment, 7
>7 8
>8 9
>9 :%
GetAppointmentByPatientID; T
(T U
intU X
	patientIDY b
)b c
{ 	
var 
appointment_list  
=! "
await# (
_context) 1
.1 2
Appointment2 =
.= >
Where> C
(C D
xD E
=>F H
	patientIDI R
==S U
xV W
.W X
	PatientIDX a
)a b
.b c
ToListAsyncc n
(n o
)o p
;p q
return 
appointment_list #
;# $
} 	
public 
async 
Task 
< 
ActionResult &
<& '
Appointment' 2
>2 3
>3 4$
PostAppointmentInService5 M
(M N
AppointmentN Y
appointmentZ e
)e f
{ 	
_context 
. 
Appointment  
.  !
Add! $
($ %
appointment% 0
)0 1
;1 2
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return!! 
appointment!! 
;!! 
}"" 	
public## 
async## 
Task## 
<## 
ActionResult## &
<##& '
List##' +
<##+ ,
Appointment##, 7
>##7 8
>##8 9
>##9 :$
GetAppointmentByDoctorID##; S
(##S T
int##T W
	doctor_id##X a
)##a b
{$$ 	
var&& 
appointment_list&&  
=&&! "
await&&# (
_context&&) 1
.&&1 2
Appointment&&2 =
.&&= >
Where&&> C
(&&C D
x&&D E
=>&&F H
	doctor_id&&I R
==&&S U
x&&V W
.&&W X
DoctorID&&X `
)&&` a
.&&a b
ToListAsync&&b m
(&&m n
)&&n o
;&&o p
return(( 
appointment_list(( #
;((# $
})) 	
public-- 
async-- 
Task-- 
<-- 
ActionResult-- &
<--& '
Appointment--' 2
>--2 3
>--3 4
GetAppointmentByID--5 G
(--G H
int--H K
id--L N
)--N O
{.. 	
var// 
appointment// 
=// 
await// #
_context//$ ,
.//, -
Appointment//- 8
.//8 9
	FindAsync//9 B
(//B C
id//C E
)//E F
;//F G
return00 
appointment00 
;00 
}11 	
public33 
HttpResponseMessage33 "
PutAppointment33# 1
(331 2
int332 5
id336 8
,338 9
Appointment33: E
appointment33F Q
)33Q R
{44 	
_context77 
.77 
Entry77 
(77 
appointment77 &
)77& '
.77' (
State77( -
=77. /
EntityState770 ;
.77; <
Modified77< D
;77D E
_context99 
.99 
SaveChanges99  
(99  !
)99! "
;99" #
if<< 
(<< 
appointment<< 
.<< 
Prescription<< (
!=<<) +
$str<<, .
)<<. /
{== 
appointment>> 
.>> 
Status>> "
=>># $
$str>>% +
;>>+ ,
_context?? 
.?? 
SaveChanges?? $
(??$ %
)??% &
;??& '
}AA 
_contextBB 
.BB 
SaveChangesBB  
(BB  !
)BB! "
;BB" #
varDD 
responseDD 
=DD 
newDD 
HttpResponseMessageDD 2
(DD2 3
)DD3 4
;DD4 5
returnFF 
responseFF 
;FF 
}HH 	
publicII 
HttpResponseMessageII "$
PostAppointmentForReviewII# ;
(II; <
intII< ?
idII@ B
,IIB C
stringIID J
reviewIIK Q
)IIQ R
{JJ 	
AppointmentLL 
appointmentLL #
=LL$ %
_contextLL& .
.LL. /
AppointmentLL/ :
.LL: ;
WhereLL; @
(LL@ A
xLLA B
=>LLC E
xLLF G
.LLG H
AppointmentIDLLH U
==LLV X
idLLY [
)LL[ \
.LL\ ]
FirstOrDefaultLL] k
(LLk l
)LLl m
;LLm n
varMM 
	response1MM 
=MM 
newMM 
HttpResponseMessageMM  3
(MM3 4
HttpStatusCodeMM4 B
.MMB C

BadRequestMMC M
)MMM N
;MMN O
ifOO 
(OO 
appointmentOO 
==OO 
nullOO #
)OO# $
{PP 
returnRR 
	response1RR  
;RR  !
}TT 
appointmentWW 
.WW 
ReviewWW 
=WW  
reviewWW! '
;WW' (
_contextXX 
.XX 
EntryXX 
(XX 
appointmentXX &
)XX& '
.XX' (
StateXX( -
=XX. /
EntityStateXX0 ;
.XX; <
ModifiedXX< D
;XXD E
_contextYY 
.YY 
SaveChangesYY  
(YY  !
)YY! "
;YY" #
var[[ 
response[[ 
=[[ 
new[[ 
HttpResponseMessage[[ 2
([[2 3
)[[3 4
;[[4 5
return]] 
response]] 
;]] 
}^^ 	
public`` 
HttpResponseMessage`` "
DeleteAppointment``# 4
(``4 5
int``5 8
id``9 ;
)``; <
{aa 	
varbb 
appointmentbb 
=bb 
_contextbb &
.bb& '
Appointmentbb' 2
.bb2 3
Findbb3 7
(bb7 8
idbb8 :
)bb: ;
;bb; <
ifcc 
(cc 
appointmentcc 
==cc 
nullcc #
)cc# $
{dd 
varee 
	response1ee 
=ee 
newee  #
HttpResponseMessageee$ 7
(ee7 8
HttpStatusCodeee8 F
.eeF G

BadRequesteeG Q
)eeQ R
;eeR S
returnff 
	response1ff  
;ff  !
}gg 
appointmentll 
.ll 
Statusll 
=ll  
$strll! ,
;ll, -
_contextmm 
.mm 
SaveChangesmm  
(mm  !
)mm! "
;mm" #
varoo 
responseoo 
=oo 
newoo 
HttpResponseMessageoo 2
(oo2 3
)oo3 4
;oo4 5
returnqq 
responseqq 
;qq 
}ss 	
}uu 
}vv £
1O:\CaseStudy\Case_Study\Services\DoctorService.cs
	namespace

 	

Case_Study


 
.

 
Services

 
{ 
public 

class 
DoctorService 
:  
IDoctorService! /
{ 
private 
readonly 
DoctorContext &
_context' /
;/ 0
public 
DoctorService 
( 
DoctorContext *
doctorcontext+ 8
)8 9
{ 	
_context 
= 
doctorcontext $
;$ %
} 	
public 
async 
Task 
< 
ActionResult &
<& '
List' +
<+ ,
Doctor, 2
>2 3
>3 4
>4 5%
GetDoctorBySpecialization6 O
(O P
stringP V
specializationW e
)e f
{ 	
var 
doctor 
= 
await 
_context '
.' (
Doctor( .
.. /
Where/ 4
(4 5
x5 6
=>7 9
x: ;
.; <
Specialization< J
==K M
specializationN \
)\ ]
.] ^
ToListAsync^ i
(i j
)j k
;k l
return 
doctor 
; 
} 	
public 
async 
Task 
< 
ActionResult &
<& '
Doctor' -
>- .
>. /
PostDoctorByService0 C
(C D
DoctorD J
doctorK Q
)Q R
{ 	
_context 
. 
Doctor 
. 
Add 
(  
doctor  &
)& '
;' (
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return 
doctor 
; 
} 	
public   
async   
Task   
<   
ActionResult   &
<  & '
Doctor  ' -
>  - .
>  . /
GetDoctorByEmail  0 @
(  @ A
string  A G
email  H M
)  M N
{!! 	
var"" 
doctor"" 
="" 
await"" 
_context"" '
.""' (
Doctor""( .
."". /
Where""/ 4
(""4 5
x""5 6
=>""7 9
x"": ;
.""; <
Email""< A
==""B D
email""E J
)""J K
.""K L
FirstOrDefaultAsync""L _
(""_ `
)""` a
;""a b
return$$ 
doctor$$ 
;$$ 
}%% 	
}&& 
}'' É
7O:\CaseStudy\Case_Study\Services\IAppointmentService.cs
	namespace		 	

Case_Study		
 
.		 
Services		 
{

 
public 

	interface 
IAppointmentService (
{ 
Task 
< 
ActionResult 
< 
List 
< 
Appointment *
>* +
>+ ,
>, -%
GetAppointmentByPatientID. G
(G H
intH K
	patientIDL U
)U V
;V W
Task 
< 
ActionResult 
< 
Appointment %
>% &
>& '$
PostAppointmentInService( @
(@ A
AppointmentA L
appointmentM X
)X Y
;Y Z
Task 
< 
ActionResult 
< 
List 
< 
Appointment *
>* +
>+ ,
>, -$
GetAppointmentByDoctorID. F
(F G
intG J
	doctor_idK T
)T U
;U V
Task 
< 
ActionResult 
< 
Appointment %
>% &
>& '
GetAppointmentByID( :
(: ;
int; >
id? A
)A B
;B C
HttpResponseMessage 
PutAppointment *
(* +
int+ .
id/ 1
,1 2
Appointment3 >
appointment? J
)J K
;K L
HttpResponseMessage $
PostAppointmentForReview 4
(4 5
int5 8
id9 ;
,; <
string= C
reviewD J
)J K
;K L
HttpResponseMessage 
DeleteAppointment -
(- .
int. 1
id2 4
)4 5
;5 6
} 
} ï
2O:\CaseStudy\Case_Study\Services\IDoctorService.cs
	namespace 	

Case_Study
 
. 
Services 
{		 
public

 

	interface

 
IDoctorService

 #
{ 
Task 
< 
ActionResult 
< 
List 
< 
Doctor %
>% &
>& '
>' (%
GetDoctorBySpecialization) B
(B C
stringC I
specializationJ X
)X Y
;Y Z
Task 
< 
ActionResult 
< 
Doctor  
>  !
>! "
PostDoctorByService# 6
(6 7
Doctor7 =
doctor> D
)D E
;E F
Task 
< 
ActionResult 
< 
Doctor  
>  !
>! "
GetDoctorByEmail# 3
(3 4
string4 :
email; @
)@ A
;A B
} 
} Ì
3O:\CaseStudy\Case_Study\Services\IPatientService.cs
	namespace 	

Case_Study
 
. 
Services 
{		 
public

 

	interface

 
IPatientService

 $
{ 
Task 
< 
ActionResult 
< 
Patient !
>! "
>" # 
PostPatientByService$ 8
(8 9
Patient9 @
patientA H
)H I
;I J
Task 
< 
ActionResult 
< 
Patient !
>! "
>" #
GetPatientByEmail$ 5
(5 6
string6 <
email= B
)B C
;C D
} 
} Ä
2O:\CaseStudy\Case_Study\Services\PatientService.cs
	namespace

 	

Case_Study


 
.

 
Services

 
{ 
public 

class 
PatientService 
:  
IPatientService! 0
{ 
private 
readonly 
PatientContext '
_context( 0
;0 1
public 
PatientService 
( 
PatientContext ,
patientContext- ;
); <
{ 	
_context 
= 
patientContext %
;% &
} 	
public 
async 
Task 
< 
ActionResult &
<& '
Patient' .
>. /
>/ 0 
PostPatientByService1 E
(E F
PatientF M
patientN U
)U V
{ 	
_context 
. 
Patient 
. 
Add  
(  !
patient! (
)( )
;) *
await 
_context 
. 
SaveChangesAsync +
(+ ,
), -
;- .
return 
patient 
; 
} 	
public 
async 
Task 
< 
ActionResult &
<& '
Patient' .
>. /
>/ 0
GetPatientByEmail1 B
(B C
stringC I
emailJ O
)O P
{ 	
var 
patient 
= 
await 
_context '
.' (
Patient( /
./ 0
Where0 5
(5 6
x6 7
=>8 :
x; <
.< =
Email= B
==C E
emailF K
)K L
.L M
FirstOrDefaultAsyncM `
(` a
)a b
;b c
return 
patient 
; 
} 	
}!! 
}"" ˆ'
"O:\CaseStudy\Case_Study\Startup.cs
	namespace 	

Case_Study
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{   	
services!! 
.!! 
AddCors!! 
(!! 
)!! 
;!! 
services## 
.## 
AddControllers## #
(### $
)##$ %
;##% &
services%% 
.%% 
	AddScoped%% 
<%% 
IDoctorService%% -
,%%- .
DoctorService%%/ <
>%%< =
(%%= >
)%%> ?
;%%? @
services&& 
.&& 
	AddScoped&& 
<&& 
IAppointmentService&& 2
,&&2 3
AppointmentService&&4 F
>&&F G
(&&G H
)&&H I
;&&I J
services'' 
.'' 
	AddScoped'' 
<'' 
IPatientService'' .
,''. /
PatientService''0 >
>''> ?
(''? @
)''@ A
;''A B
services)) 
.)) 
AddDbContext)) !
<))! "
AppointmentContext))" 4
>))4 5
())5 6
options))6 =
=>))> @
options** 
.** 
UseSqlServer** (
(**( )
Configuration**) 6
.**6 7
GetConnectionString**7 J
(**J K
$str**K ^
)**^ _
)**_ `
)**` a
;**a b
services,, 
.,, 
AddDbContext,, !
<,,! "
PatientContext,," 0
>,,0 1
(,,1 2
options,,2 9
=>,,: <
options-- 
.-- 
UseSqlServer-- (
(--( )
Configuration--) 6
.--6 7
GetConnectionString--7 J
(--J K
$str--K ^
)--^ _
)--_ `
)--` a
;--a b
services// 
.// 
AddDbContext// !
<//! "
DoctorContext//" /
>/// 0
(//0 1
options//1 8
=>//9 ;
options00 
.00 
UseSqlServer00 (
(00( )
Configuration00) 6
.006 7
GetConnectionString007 J
(00J K
$str00K ^
)00^ _
)00_ `
)00` a
;00a b
services11 
.11 
AddSwaggerGen11 "
(11" #
c11# $
=>11% '
{22 
c33 
.33 

SwaggerDoc33 
(33 
$str33 !
,33! "
new33# &
OpenApiInfo33' 2
{333 4
Title335 :
=33; <
$str33= I
,33I J
Version33K R
=33S T
$str33U Y
}33Z [
)33[ \
;33\ ]
}44 
)44 
;44 
}55 	
public88 
void88 
	Configure88 
(88 
IApplicationBuilder88 1
app882 5
,885 6
IWebHostEnvironment887 J
env88K N
)88N O
{99 	
if:: 
(:: 
env:: 
.:: 
IsDevelopment:: !
(::! "
)::" #
)::# $
{;; 
app<< 
.<< %
UseDeveloperExceptionPage<< -
(<<- .
)<<. /
;<</ 0
app== 
.== 

UseSwagger== 
(== 
)==  
;==  !
app>> 
.>> 
UseSwaggerUI>>  
(>>  !
c>>! "
=>>># %
c>>& '
.>>' (
SwaggerEndpoint>>( 7
(>>7 8
$str>>8 R
,>>R S
$str>>T `
)>>` a
)>>a b
;>>b c
}?? 
appAA 
.AA 

UseRoutingAA 
(AA 
)AA 
;AA 
appCC 
.CC 
UseCorsCC 
(CC 
xCC 
=>CC 
xCC 
.CC 
WithOriginsCC *
(CC* +
$strCC+ B
)CCB C
.CCC D
AllowAnyMethodCCD R
(CCR S
)CCS T
.CCT U
AllowAnyHeaderCCU c
(CCc d
)CCd e
)CCe f
;CCf g
appEE 
.EE 
UseAuthorizationEE  
(EE  !
)EE! "
;EE" #
appGG 
.GG 
UseEndpointsGG 
(GG 
	endpointsGG &
=>GG' )
{HH 
	endpointsII 
.II 
MapControllersII (
(II( )
)II) *
;II* +
}JJ 
)JJ 
;JJ 
}KK 	
}LL 
}MM 